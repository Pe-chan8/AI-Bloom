<%# 共通フォーム: mode によって「新規投稿モーダル」か「編集ページ」かを分岐 %>
<%= form_with model: post do |f| %>
  <div class="mb-4">
    <%= f.label :body, "今日のメモ", class: "block text-sm font-semibold mb-2" %>
    <%= f.text_area :body,
          rows: 6,
          class: "w-full border rounded-xl p-3",
          placeholder: "いまの気持ちを書いてみよう…" %>
  </div>

  <div class="mt-4 flex justify-end gap-2">
    <% if mode == :modal %>
      <!-- 新規投稿モーダル用 -->
      <button
        type="button"
        class="px-4 py-2 rounded-lg border border-slate-300 text-slate-600"
        onclick="closePostModal()"
      >
        やめる
      </button>

      <%= f.submit "投稿する",
            class: "bg-sky-500 text-white px-4 py-2 rounded-lg hover:bg-sky-600" %>

    <% else %>
      <!-- 編集ページ用: やめる / 更新 / 削除 を1行に並べる -->
      <%= link_to "やめる",
            root_path,
            class: "px-4 py-2 rounded-lg border border-slate-300 text-slate-600" %>

      <%= f.submit "更新する",
            class: "bg-sky-500 text-white px-4 py-2 rounded-lg hover:bg-sky-600" %>

      <%= link_to "削除する",
            post_path(post),
            data: {
              turbo_method: :delete,
              turbo_confirm: "本当にこの投稿を削除しますか？"
            },
            class: "px-4 py-2 rounded-lg border border-rose-400 text-rose-600 hover:bg-rose-50" %>
    <% end %>
  </div>
<% end %>
